# jsonrpc-client-tcp

TCP transport implementation for the JSON-RPC 2.0 clients generated by
[`jsonrpc-client-core`](../jsonrpc_client_core/index.html).

Uses the async Tokio based TcpStream to implement a JSON-RPC 2.0 compliant TCP
transport.

## Examples

See the integration test in `tests/localhost.rs` for code that creates an actual TCP server
with `jsonrpc_tcp_server`, and sends requests to it with this crate.

Here is a small example of how to use this crate together with `jsonrpc_core`:

```rust
#[macro_use] extern crate jsonrpc_client_core;
extern crate jsonrpc_client_tcp;

use jsonrpc_client_tcp::TcpTransport;

jsonrpc_client!(pub struct FizzBuzzClient {
    /// Returns the fizz-buzz string for the given number.
    pub fn fizz_buzz(&mut self, number: u64) -> RpcRequest<String>;
});

fn main() {
    let transport = TcpTransport::new().unwrap();
    let transport_handle = transport.handle("127.0.0.1:3030").unwrap();
    let mut client = FizzBuzzClient::new(transport_handle);
    let result1 = client.fizz_buzz(3).call().unwrap();
    let result2 = client.fizz_buzz(4).call().unwrap();
    let result3 = client.fizz_buzz(5).call().unwrap();

    // Should print "fizz 4 buzz" if the server implemented the service correctly
    println!("{} {} {}", result1, result2, result3);
}
```

License: MIT/Apache-2.0
